<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>CHATAO.cz ‚Äì P≈ôidat chatu | Registrace nabidky</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="P≈ôidejte svoji chatu, chalupu nebo jinou slu≈æbu do CHATAO.cz a zaƒçnƒõte p≈ôij√≠mat rezervace p≈ô√≠mo p≈ôes Instagram chat." />
  <meta name="keywords" content="p≈ôidat chatu, registrace, booking, rezervace, CHATAO, nab√≠dka slu≈æeb" />
  <meta name="author" content="CHATAO.cz" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://chatao.cz/pridat-chatu.html" />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://chatao.cz/pridat-chatu.html" />
  <meta property="og:title" content="CHATAO.cz ‚Äì P≈ôidat chatu | Registrace nab√≠dky" />
  <meta property="og:description" content="P≈ôidejte svoji chatu, chalupu nebo jinou slu≈æbu do CHATAO.cz a zaƒçnƒõte p≈ôij√≠mat rezervace p≈ô√≠mo p≈ôes Instagram chat." />
  <meta property="og:image" content="https://chatao.cz/og-image.jpg" />
  <meta property="og:locale" content="cs_CZ" />
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="CHATAO.cz ‚Äì P≈ôidat chatu" />
  <meta name="twitter:description" content="P≈ôidejte svoji chatu, chalupu nebo jinou slu≈æbu do CHATAO.cz a zaƒçnƒõte p≈ôij√≠mat rezervace." />
  <meta name="twitter:image" content="https://chatao.cz/og-image.jpg" />
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#568B71" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            pine: {50:"#F3F7F5",100:"#E3EEE8",200:"#C5DCD1",300:"#9FC3B2",400:"#78A78F",500:"#568B71",600:"#3E6D58",700:"#2E5344",800:"#213D33",900:"#172A23"},
            ember: {50:"#FFF7ED",100:"#FFEDD5",200:"#FED7AA",300:"#FDBA74",400:"#FB923C",500:"#F97316",600:"#EA580C",700:"#C2410C",800:"#9A3412",900:"#7C2D12"},
            fog: {50:"#F6F7F9",100:"#ECEEF2",200:"#D7DBE4",300:"#B7BECE",400:"#8F9AB2",500:"#6E7A95",600:"#56607A",700:"#434C62",800:"#31384A",900:"#232838"},
            cream: "#F5F1E8",
            ink: "#0B0F0E",
            wood: "#2A211A",
          },
          boxShadow: {
            soft: "0 22px 60px rgba(0,0,0,0.45)",
            lift: "0 18px 40px rgba(0,0,0,0.30)",
          },
          borderRadius: { "4xl": "2rem" },
          fontFamily: { sans: ["ui-sans-serif","system-ui","-apple-system","Segoe UI","Roboto","Arial"] },
        },
      },
    };
  </script>

  <style>
    :root{ color-scheme: dark; }
    .grain::before{content:"";position:absolute;inset:0;pointer-events:none;opacity:.08;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="180" height="180"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency=".9" numOctaves="3" stitchTiles="stitch"/></filter><rect width="180" height="180" filter="url(%23n)" opacity=".35"/></svg>');mix-blend-mode:overlay}
    .glass{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px)}
    .ringline{box-shadow:0 0 0 1px rgba(255,255,255,.10) inset}
    .shimmer{position:relative;overflow:hidden}
    .shimmer::after{content:"";position:absolute;inset:-60% -20%;transform:rotate(18deg);background:linear-gradient(90deg,transparent,rgba(255,255,255,.10),transparent);animation:shimmer 4.8s linear infinite;pointer-events:none}
    @keyframes shimmer{0%{transform:translateX(-20%) rotate(18deg)}100%{transform:translateX(60%) rotate(18deg)}}
    .fade-up{opacity:0;transform:translateY(10px);transition:all .7s cubic-bezier(.2,.8,.2,1)}
    .fade-up.is-visible{opacity:1;transform:translateY(0)}
    .hide-scrollbar::-webkit-scrollbar{height:0;width:0}
    :focus-visible{outline:2px solid rgba(249,115,22,.55);outline-offset:3px;border-radius:18px}
    /* slider */
    input[type=range]{-webkit-appearance:none;appearance:none;height:10px;border-radius:999px;background:rgba(255,255,255,.08);outline:none}
    input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:22px;height:22px;border-radius:999px;background:rgba(249,115,22,.85);box-shadow:0 0 0 6px rgba(249,115,22,.18)}
  </style>
</head>

<body class="min-h-screen bg-ink text-cream">
  <!-- Background -->
  <div class="fixed inset-0 -z-20">
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_10%_10%,rgba(86,139,113,0.22),transparent_45%),radial-gradient(circle_at_90%_20%,rgba(249,115,22,0.14),transparent_42%),radial-gradient(circle_at_60%_95%,rgba(142,154,178,0.14),transparent_46%)]"></div>
    <div class="absolute inset-0 opacity-40 bg-[linear-gradient(180deg,rgba(0,0,0,0.65),rgba(0,0,0,0.86))]"></div>
  </div>

  <!-- Top bar -->
  <header class="sticky top-0 z-40">
    <div class="glass ringline">
      <div class="mx-auto max-w-7xl px-4 md:px-6 py-3">
        <div class="flex items-center justify-between gap-3">
          <a href="#" class="flex items-center gap-3 group">
            <div class="h-10 w-10 rounded-2xl bg-pine-700/40 ringline grid place-items-center group-hover:bg-pine-700/55 transition">
              <span class="text-lg">üè°</span>
            </div>
            <div class="leading-tight">
              <div class="font-semibold tracking-wide">P≈ôidat chatu</div>
              <div class="text-xs text-cream/70">majitel / spr√°vce nab√≠dky</div>
            </div>
          </a>

          <div class="flex items-center gap-2">
            <button id="btnSaveDraft" class="px-4 py-2 rounded-2xl bg-white/5 hover:bg-white/8 ringline transition text-sm">Ulo≈æit koncept</button>
            <button id="btnPreview" class="px-4 py-2 rounded-2xl bg-white/5 hover:bg-white/8 ringline transition text-sm">N√°hled</button>
            <button id="btnPublish" class="px-4 py-2 rounded-2xl bg-ember-500/15 hover:bg-ember-500/22 ringline transition shimmer text-sm">Publikovat</button>
          </div>
        </div>

        <!-- progress / steps -->
        <div class="mt-3 flex items-center justify-between gap-3">
          <div class="flex-1">
            <div class="h-2 rounded-full bg-white/5 ringline overflow-hidden">
              <div id="progressBar" class="h-full w-[10%] bg-ember-500/35"></div>
            </div>
            <div class="mt-2 text-xs text-cream/60"><span id="stepLabel">Krok 1/6</span> ‚Ä¢ <span id="stepTitle">Z√°klad</span></div>
          </div>
          <div class="hidden md:flex items-center gap-2 text-xs text-cream/55">
            <span class="px-3 py-1.5 rounded-full bg-white/5 ringline">‚ö° rychl√©</span>
            <span class="px-3 py-1.5 rounded-full bg-white/5 ringline">üß† chytr√©</span>
            <span class="px-3 py-1.5 rounded-full bg-white/5 ringline">üßæ bez chaosu</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="mx-auto max-w-7xl px-4 md:px-6 py-8 md:py-10">
    <div class="grid lg:grid-cols-[1.4fr_0.9fr] gap-6 items-start">

      <!-- LEFT: form wizard -->
      <section class="relative overflow-hidden rounded-4xl bg-white/5 ringline shadow-soft grain">
        <div class="absolute -top-44 -right-44 h-[420px] w-[420px] rounded-full bg-pine-600/25 blur-3xl"></div>
        <div class="absolute -bottom-44 -left-36 h-[420px] w-[420px] rounded-full bg-ember-500/15 blur-3xl"></div>

        <div class="relative p-5 md:p-7">
          <div class="flex items-start justify-between gap-4">
            <div>
              <h1 class="text-2xl md:text-3xl font-semibold tracking-tight">Vytvo≈ô nab√≠dku, co prod√°v√°.</h1>
              <p class="mt-2 text-cream/75 max-w-2xl">Vypl≈à jen to nejd≈Øle≈æitƒõj≈°√≠. Zbytek dopoƒç√≠t√°me, navrhneme, a d√°me do form√°tu, kter√Ω lidi ukl√°daj√≠ a sd√≠l√≠.</p>
            </div>
            <div class="hidden md:block">
              <div class="px-4 py-3 rounded-3xl bg-white/5 ringline text-sm">
                <div class="text-xs text-cream/60">Kvalita nab√≠dky</div>
                <div class="mt-1 flex items-center gap-2">
                  <div class="h-2 w-28 rounded-full bg-white/6 ringline overflow-hidden"><div id="qualityBar" class="h-full w-[30%] bg-pine-500/45"></div></div>
                  <div id="qualityPct" class="text-xs">30%</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Step container -->
          <div id="steps" class="mt-6 space-y-6">

            <!-- STEP 1: Z√°klad -->
            <div class="step" data-step="0">
              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <label class="text-sm text-cream/70">N√°zev chaty*</label>
                  <input id="name" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline placeholder:text-cream/35" placeholder="nap≈ô. Samota u lesa" />
                  <p class="mt-2 text-xs text-cream/55">Kr√°tk√©, konkr√©tn√≠. Bez CAPSLOCKU.</p>
                </div>
                <div>
                  <label class="text-sm text-cream/70">Oblast / region*</label>
                  <input id="region" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline placeholder:text-cream/35" placeholder="nap≈ô. ≈†umava" />
                  <p class="mt-2 text-xs text-cream/55">Lidi hledaj√≠ podle regionu.</p>
                </div>
              </div>

              <div class="grid md:grid-cols-3 gap-4">
                <div>
                  <label class="text-sm text-cream/70">Cena od (Kƒç/noc)*</label>
                  <input id="priceFrom" type="number" min="0" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline" placeholder="2490" />
                  <p class="mt-2 text-xs text-cream/55">Staƒç√≠ ‚Äûod‚Äú ‚Äì p≈ôesn√© ceny v rezervaƒçn√≠m kroku.</p>
                </div>
                <div>
                  <label class="text-sm text-cream/70">Kapacita (osob)*</label>
                  <input id="capacity" type="number" min="1" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline" placeholder="4" />
                </div>
                <div>
                  <label class="text-sm text-cream/70">Typ ubytov√°n√≠</label>
                  <select id="type" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline">
                    <option value="chata">Chata</option>
                    <option value="chalupa">Chalupa</option>
                    <option value="tiny">Tiny house</option>
                    <option value="glamping">Glamping</option>
                    <option value="apartman">Apartm√°n</option>
                  </select>
                </div>
              </div>

              <div>
                <label class="text-sm text-cream/70">Jednovƒõt√Ω ‚Äûvibe‚Äú*</label>
                <textarea id="vibe" rows="3" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline placeholder:text-cream/35" placeholder="nap≈ô. Krb prask√°, les ≈°um√≠, a svƒõt se zpomal√≠."></textarea>
                <div class="mt-2 flex items-center justify-between text-xs text-cream/55">
                  <span>Neprod√°v√°≈° metr ƒçtvereƒçn√≠. Prod√°v√°≈° pocit.</span>
                  <span id="vibeCount">0/180</span>
                </div>
              </div>

              <div class="rounded-4xl bg-white/4 ringline p-5">
                <div class="flex items-start justify-between gap-3">
                  <div>
                    <div class="font-semibold">AI n√°vrh tag≈Ø (demo)</div>
                    <div class="mt-1 text-sm text-cream/70">Vyber 3‚Äì7 tag≈Ø. Ty rozhoduj√≠ o feedu.</div>
                  </div>
                  <button id="btnSuggestTags" class="px-4 py-2 rounded-2xl bg-white/5 hover:bg-white/8 ringline transition text-sm">Navrhnout</button>
                </div>
                <div id="tags" class="mt-4 flex flex-wrap gap-2"></div>
                <div class="mt-3 text-xs text-cream/55">Tagy: samota ‚Ä¢ ohe≈à ‚Ä¢ sauna ‚Ä¢ pes ‚Ä¢ ticho ‚Ä¢ hory ‚Ä¢ voda ‚Ä¢ design‚Ä¶</div>
              </div>
            </div>

            <!-- STEP 2: Fotky -->
            <div class="step hidden" data-step="1">
              <div class="flex items-start justify-between gap-3">
                <div>
                  <div class="text-xl font-semibold">Fotky (tohle prod√°v√°)</div>
                  <div class="mt-1 text-sm text-cream/70">Minimum 3. Doporuƒçeno 8‚Äì12.</div>
                </div>
                <label class="px-4 py-2 rounded-2xl bg-ember-500/15 hover:bg-ember-500/22 ringline transition shimmer text-sm cursor-pointer">
                  P≈ôidat fotky
                  <input id="photos" type="file" accept="image/*" multiple class="hidden" />
                </label>
              </div>

              <div class="mt-4 grid sm:grid-cols-2 lg:grid-cols-3 gap-3" id="photoGrid"></div>

              <div class="mt-4 rounded-4xl bg-white/4 ringline p-5">
                <div class="font-semibold">Cover fotka</div>
                <div class="mt-1 text-sm text-cream/70">Vyber, co se bude zobrazovat ve feedu.</div>
                <div class="mt-4 flex flex-wrap gap-2" id="coverPick"></div>
              </div>
            </div>

            <!-- STEP 3: V√Ωbava -->
            <div class="step hidden" data-step="2">
              <div class="text-xl font-semibold">V√Ωbava & pravidla</div>
              <div class="mt-1 text-sm text-cream/70">ƒå√≠m v√≠c detail≈Ø, t√≠m lep≈°√≠ konverze.</div>

              <div class="mt-4 grid md:grid-cols-2 gap-4">
                <div class="rounded-4xl bg-white/4 ringline p-5">
                  <div class="font-medium">Vybaven√≠</div>
                  <div class="mt-3 grid grid-cols-2 gap-2" id="amenities"></div>
                </div>
                <div class="rounded-4xl bg-white/4 ringline p-5">
                  <div class="font-medium">Pravidla</div>
                  <div class="mt-3 grid gap-2" id="rules"></div>
                </div>
              </div>

              <div class="mt-4 rounded-4xl bg-white/4 ringline p-5">
                <div class="font-medium">Atmosf√©ra (slider)</div>
                <div class="mt-4 grid md:grid-cols-3 gap-4">
                  <div>
                    <div class="text-sm text-cream/70">Samota</div>
                    <input id="slSolitude" type="range" min="0" max="10" value="7" class="mt-2 w-full" />
                    <div class="mt-2 text-xs text-cream/60">Hodnota: <span id="slSolitudeV">7</span>/10</div>
                  </div>
                  <div>
                    <div class="text-sm text-cream/70">Design</div>
                    <input id="slDesign" type="range" min="0" max="10" value="6" class="mt-2 w-full" />
                    <div class="mt-2 text-xs text-cream/60">Hodnota: <span id="slDesignV">6</span>/10</div>
                  </div>
                  <div>
                    <div class="text-sm text-cream/70">Wellness</div>
                    <input id="slWellness" type="range" min="0" max="10" value="5" class="mt-2 w-full" />
                    <div class="mt-2 text-xs text-cream/60">Hodnota: <span id="slWellnessV">5</span>/10</div>
                  </div>
                </div>
                <p class="mt-3 text-xs text-cream/55">Tyhle slidery m≈Ø≈æeme pozdƒõji pou≈æ√≠t pro doporuƒçov√°n√≠ ve feedu.</p>
              </div>
            </div>

            <!-- STEP 4: Lokace -->
            <div class="step hidden" data-step="3">
              <div class="text-xl font-semibold">Lokace</div>
              <div class="mt-1 text-sm text-cream/70">Nemus√≠≈° d√°vat p≈ôesnou adresu ve≈ôejnƒõ. Staƒç√≠ oblast + bod pro mapu.</div>

              <div class="mt-4 grid md:grid-cols-2 gap-4">
                <div>
                  <label class="text-sm text-cream/70">Mƒõsto / obec*</label>
                  <input id="city" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline" placeholder="nap≈ô. Ka≈°persk√© Hory" />
                </div>
                <div>
                  <label class="text-sm text-cream/70">PSƒå</label>
                  <input id="zip" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline" placeholder="nap≈ô. 34192" />
                </div>
              </div>

              <div class="mt-4 grid md:grid-cols-2 gap-4">
                <div>
                  <label class="text-sm text-cream/70">Sou≈ôadnice (lat,lng)</label>
                  <input id="coords" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline" placeholder="49.137, 13.556" />
                  <div class="mt-2 text-xs text-cream/55">Tip: do budoucna sem d√°me mapu a klikem nastav√≠≈° bod.</div>
                </div>
                <div class="rounded-4xl bg-white/4 ringline p-5">
                  <div class="font-medium">Soukrom√≠</div>
                  <div class="mt-2 text-sm text-cream/70">Ve feedu zobraz√≠me jen oblast + vzd√°lenost. P≈ôesn√° adresa a≈æ p≈ôi potvrzen√≠ rezervace.</div>
                  <div class="mt-3 flex items-center gap-2">
                    <input id="privacy" type="checkbox" class="h-5 w-5" checked />
                    <label for="privacy" class="text-sm">Skr√Ωt p≈ôesnou adresu ve≈ôejnƒõ</label>
                  </div>
                </div>
              </div>
            </div>

            <!-- STEP 5: Kontakt a platby -->
            <div class="step hidden" data-step="4">
              <div class="text-xl font-semibold">Kontakt & rezervace</div>
              <div class="mt-1 text-sm text-cream/70">Jak tƒõ maj√≠ lidi kontaktovat?</div>

              <div class="mt-4 grid md:grid-cols-2 gap-4">
                <div>
                  <label class="text-sm text-cream/70">Jm√©no / n√°zev*</label>
                  <input id="ownerName" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline" placeholder="nap≈ô. Jan Nov√°k" />
                </div>
                <div>
                  <label class="text-sm text-cream/70">Telefon</label>
                  <input id="ownerPhone" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline" placeholder="+420 777 123 456" />
                </div>
              </div>

              <div class="mt-4 grid md:grid-cols-2 gap-4">
                <div>
                  <label class="text-sm text-cream/70">E‚Äëmail*</label>
                  <input id="ownerEmail" type="email" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline" placeholder="info@‚Ä¶" />
                </div>
                <div>
                  <label class="text-sm text-cream/70">Preferovan√Ω zp≈Øsob</label>
                  <select id="contactMode" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline">
                    <option value="chat">CHATAO chat (doporuƒçeno)</option>
                    <option value="phone">Telefon</option>
                    <option value="email">E‚Äëmail</option>
                    <option value="form">Popt√°vkov√Ω formul√°≈ô</option>
                  </select>
                </div>
              </div>

              <div class="mt-4 rounded-4xl bg-white/4 ringline p-5">
                <div class="font-medium">Rezervaƒçn√≠ pravidla (rychl√©)</div>
                <div class="mt-3 grid md:grid-cols-3 gap-3">
                  <div>
                    <div class="text-sm text-cream/70">Min. poƒçet noc√≠</div>
                    <input id="minNights" type="number" min="1" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline" value="2" />
                  </div>
                  <div>
                    <div class="text-sm text-cream/70">Check‚Äëin</div>
                    <input id="checkIn" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline" value="15:00" />
                  </div>
                  <div>
                    <div class="text-sm text-cream/70">Check‚Äëout</div>
                    <input id="checkOut" class="mt-2 w-full px-4 py-3 rounded-3xl bg-white/5 ringline" value="10:00" />
                  </div>
                </div>
                <div class="mt-3 text-xs text-cream/55">Pozdƒõji p≈ôid√°me kalend√°≈ô dostupnosti a ceny podle term√≠nu.</div>
              </div>
            </div>

            <!-- STEP 6: Shrnut√≠ -->
            <div class="step hidden" data-step="5">
              <div class="text-xl font-semibold">Shrnut√≠ & fin√°ln√≠ kontrola</div>
              <div class="mt-1 text-sm text-cream/70">Tady uvid√≠≈°, jak bude nab√≠dka vypadat ve feedu.</div>

              <div class="mt-4 grid lg:grid-cols-2 gap-4">
                <div class="rounded-4xl bg-white/4 ringline p-5">
                  <div class="font-medium">Kontrola</div>
                  <div class="mt-3 grid gap-2 text-sm" id="summary"></div>
                  <div class="mt-4 text-xs text-cream/55">* Povinn√© √∫daje mus√≠ b√Ωt vyplnƒõn√©.</div>
                </div>
                <div class="rounded-4xl bg-white/4 ringline p-5">
                  <div class="font-medium">Karta ve feedu (n√°hled)</div>
                  <div class="mt-3" id="cardPreview"></div>
                </div>
              </div>

              <div class="mt-4 rounded-4xl bg-white/4 ringline p-5">
                <div class="font-medium">Pr√°vn√≠ minimum (demo)</div>
                <div class="mt-3 flex items-start gap-3">
                  <input id="agree" type="checkbox" class="mt-1 h-5 w-5" />
                  <label for="agree" class="text-sm text-cream/75">Potvrzuji, ≈æe m√°m pr√°vo nab√≠dku zve≈ôejnit a √∫daje jsou pravdiv√©.</label>
                </div>
              </div>
            </div>

          </div>

          <!-- Wizard nav -->
          <div class="mt-8 flex items-center justify-between gap-3">
            <button id="btnBack" class="px-5 py-3 rounded-3xl bg-white/5 hover:bg-white/8 ringline transition">‚Üê Zpƒõt</button>
            <div class="flex items-center gap-2">
              <button id="btnNext" class="px-6 py-3 rounded-3xl bg-ember-500/15 hover:bg-ember-500/22 ringline transition shimmer">Pokraƒçovat ‚Üí</button>
            </div>
          </div>

        </div>
      </section>

      <!-- RIGHT: smart checklist + tips + live preview mini -->
      <aside class="space-y-4">
        <div class="rounded-4xl bg-white/5 ringline shadow-soft p-5 md:p-6">
          <div class="flex items-start justify-between gap-3">
            <div>
              <div class="text-lg font-semibold">Checklist</div>
              <div class="mt-1 text-sm text-cream/70">Dƒõl√° nab√≠dku ‚Äûulo≈æitelnou‚Äú.</div>
            </div>
            <span id="checkScore" class="text-xs px-3 py-1.5 rounded-full bg-ember-500/20 ringline">0/10</span>
          </div>
          <div class="mt-4 grid gap-2 text-sm" id="checklist"></div>
          <div class="mt-4 text-xs text-cream/55">Kdy≈æ d√°≈° cover + vibe + 6+ fotek + v√Ωbavu, feed tƒõ posune v√Ω≈°.</div>
        </div>

        <div class="rounded-4xl bg-white/5 ringline shadow-soft p-5 md:p-6">
          <div class="text-lg font-semibold">Mini n√°hled</div>
          <div class="mt-1 text-sm text-cream/70">Tohle je to, co u≈æivatel uvid√≠ za 0.3 s.</div>
          <div class="mt-4" id="miniPreview"></div>
        </div>

        <div class="rounded-4xl bg-white/5 ringline shadow-soft p-5 md:p-6">
          <div class="text-lg font-semibold">Tipy, co zvednou rezervace</div>
          <ul class="mt-3 space-y-2 text-sm text-cream/75 list-disc pl-5">
            <li>Prvn√≠ fotka: <span class="text-cream">v√Ωhled / exteri√©r</span>, ne kuchy≈à.</li>
            <li>Vibe vƒõta: <span class="text-cream">ticho + benefit</span> (‚Äûsauna + hvƒõzdy‚Äú).</li>
            <li>Tagy: vyber <span class="text-cream">samota / ohe≈à / sauna</span> (best performers).</li>
            <li>Uveƒè min. noc√≠ a check‚Äëin/out. Lidi miluj√≠ jasno.</li>
          </ul>
        </div>
      </aside>

    </div>
  </main>

  <!-- Toast -->
  <div id="toast" class="fixed top-20 right-4 z-[70] hidden">
    <div class="px-4 py-3 rounded-3xl bg-white/8 ringline shadow-lift text-sm"></div>
  </div>

  <!-- Preview modal -->
  <div id="modal" class="fixed inset-0 z-[80] hidden">
    <div id="modalBackdrop" class="absolute inset-0 bg-black/70"></div>
    <div class="absolute inset-0 overflow-y-auto">
      <div class="min-h-full flex items-end md:items-center justify-center p-4 md:p-8">
        <div id="modalPanel" class="w-full max-w-5xl rounded-4xl bg-ink/95 ringline shadow-soft overflow-hidden"></div>
      </div>
    </div>
  </div>

<script>
  // =====================
  // CHATAO ‚Äì P≈ôidat chatu (MVP)
  // Lok√°ln√≠ demo: ukl√°d√° do LocalStorage.
  // =====================

  const $ = (id) => document.getElementById(id);
  const toast = $("toast");
  const toastBox = toast.querySelector("div");

  function showToast(t){
    toastBox.textContent = t;
    toast.classList.remove("hidden");
    clearTimeout(showToast._t);
    showToast._t = setTimeout(()=>toast.classList.add("hidden"), 1600);
  }

  // ----- Wizard -----
  const steps = Array.from(document.querySelectorAll(".step"));
  let step = 0;

  const stepTitles = [
    "Z√°klad",
    "Fotky",
    "V√Ωbava",
    "Lokace",
    "Kontakt & rezervace",
    "Shrnut√≠",
  ];

  function setStep(n){
    step = Math.max(0, Math.min(steps.length-1, n));
    steps.forEach(s => s.classList.add("hidden"));
    steps[step].classList.remove("hidden");

    $("stepLabel").textContent = `Krok ${step+1}/${steps.length}`;
    $("stepTitle").textContent = stepTitles[step];
    $("progressBar").style.width = `${Math.round(((step+1)/steps.length)*100)}%`;

    $("btnBack").disabled = step === 0;
    $("btnBack").classList.toggle("opacity-40", step === 0);

    // Next button label
    $("btnNext").textContent = step === steps.length-1 ? "Dokonƒçit ‚Üí" : "Pokraƒçovat ‚Üí";

    updateAllUI();
    window.scrollTo({top:0,behavior:"smooth"});
  }

  // ----- Form state -----
  const model = {
    id: null,
    name: "",
    region: "",
    priceFrom: "",
    capacity: "",
    type: "chata",
    vibe: "",
    tags: new Set(),
    photos: [], // {id, file, url}
    coverId: null,
    amenities: new Set(),
    rules: new Set(),
    sliders: { solitude: 7, design: 6, wellness: 5 },
    city: "",
    zip: "",
    coords: "",
    privacy: true,
    ownerName: "",
    ownerPhone: "",
    ownerEmail: "",
    contactMode: "chat",
    minNights: 2,
    checkIn: "15:00",
    checkOut: "10:00",
    agree: false,
  };
  // ===== CHATAO: EDITACE EXISTUJ√çC√ç CHATY =====
const params = new URLSearchParams(location.search);
const editId = params.get("edit");

// Najde ulo≈æenou chatu (priorita: listings -> feed)
function loadExisting(id){
  // 1) pln√° data z listings (objekt)
  const listings = JSON.parse(localStorage.getItem("chatao_listings") || "{}");
  if (listings && listings[id]) return listings[id];

  // 2) fallback: polo≈æka z feedu (pole)
  const feed = JSON.parse(localStorage.getItem("chatao_feed") || "[]");
  const found = Array.isArray(feed) ? feed.find(x => x && x.id === id) : null;
  if (!found) return null;

  // z feed itemu slo≈æ√≠me minimum kompatibiln√≠ se serialize()
  return {
    id: found.id,
    name: found.name || "",
    region: found.region || "",
    priceFrom: Number(found.priceFrom || 0),
    capacity: Number(found.capacity || 0),
    type: found.type || "chata",
    vibe: found.vibe || "",
    tags: found.tags || [],
    coverUrl: found.cover || "",
    photosCount: 0,
    amenities: (found.features || []).filter(f => typeof f === "string" && !f.startsWith("Pravidlo: ")),
    rules: (found.features || []).filter(f => typeof f === "string" && f.startsWith("Pravidlo: ")).map(x => x.replace("Pravidlo: ","")),
    sliders: found.meta?.sliders || { solitude: 50, design: 50, wellness: 50 },
    city: found.meta?.city || "",
    zip: "",
    coords: "",
    privacy: !!found.meta?.privacy,
    ownerName: "",
    ownerPhone: "",
    ownerEmail: "",
    contactMode: "chat",
    minNights: Number(found.meta?.minNights || 1),
    checkIn: found.meta?.checkIn || "15:00",
    checkOut: found.meta?.checkOut || "10:00",
    createdAt: found.meta?.createdAt || new Date().toISOString(),
  };
}

// Tohle se vol√° p≈ôi naƒçten√≠ str√°nky
if (editId){
  const existing = loadExisting(editId);
  if (existing){
    // D≈ÆLE≈ΩIT√â: zachovej stejn√© ID (publish u≈æ pak jen p≈ôep√≠≈°e z√°znam)
    model.id = existing.id;

    // p≈ôenes hodnoty do modelu
    model.name = existing.name || "";
    model.region = existing.region || "";
    model.priceFrom = existing.priceFrom || 0;
    model.capacity = existing.capacity || 0;
    model.type = existing.type || "chata";
    model.vibe = existing.vibe || "";
    model.tags = new Set(existing.tags || []);
    model.coverUrl = existing.coverUrl || existing.cover || "";
    model.amenities = new Set(existing.amenities || []);
    model.rules = new Set(existing.rules || []);
    model.sliders = existing.sliders || model.sliders;
    model.city = existing.city || "";
    model.zip = existing.zip || "";
    model.coords = existing.coords || "";
    model.privacy = !!existing.privacy;
    model.ownerName = existing.ownerName || "";
    model.ownerPhone = existing.ownerPhone || "";
    model.ownerEmail = existing.ownerEmail || "";
    model.contactMode = existing.contactMode || model.contactMode;
    model.minNights = existing.minNights || 1;
    model.checkIn = existing.checkIn || model.checkIn;
    model.checkOut = existing.checkOut || model.checkOut;

    // pokud m√°≈° nƒõkde render/init, nech ho norm√°lnƒõ probƒõhnout ‚Äì naƒçte u≈æ model
    setTimeout(() => {
      if (typeof showToast === "function") showToast("Upravuje≈° existuj√≠c√≠ chatu ‚úèÔ∏è");
      if ((model.coverUrl || "").startsWith("blob:") && typeof showToast === "function"){
        showToast("Pozor: fotky z prohl√≠≈æeƒçe je pot≈ôeba nahr√°t znovu.");
      }
    }, 350);
  } else {
    setTimeout(() => typeof showToast === "function" && showToast("Chata pro editaci nenalezena"), 350);
  }
}

  const TAG_LIBRARY = [
    {key:"samota", icon:"üå≤"}, {key:"ohe≈à", icon:"üî•"}, {key:"sauna", icon:"üßñ"}, {key:"pes", icon:"üêï"},
    {key:"ticho", icon:"üåå"}, {key:"hory", icon:"üèîÔ∏è"}, {key:"voda", icon:"üèûÔ∏è"}, {key:"design", icon:"üè°"},
    {key:"glamping", icon:"‚ú®"}, {key:"zima", icon:"‚ùÑÔ∏è"}, {key:"krb", icon:"üî•"}, {key:"v√Ωhled", icon:"üëÄ"},
  ];

  const AMENITIES = [
    {k:"sauna", i:"üßñ"}, {k:"v√≠≈ôivka", i:"üõÅ"}, {k:"krb", i:"üî•"}, {k:"gril", i:"üçñ"},
    {k:"wifi", i:"üì∂"}, {k:"parkov√°n√≠", i:"üöó"}, {k:"pes v√≠t√°n", i:"üêï"}, {k:"k√°vovar", i:"‚òï"},
    {k:"v√Ωhled", i:"üåÑ"}, {k:"u vody", i:"üèûÔ∏è"}, {k:"dƒõtsk√©", i:"üß∏"}, {k:"ly≈æe", i:"üéø"},
  ];

  const RULES = [
    {k:"bez kou≈ôen√≠", i:"üö≠"}, {k:"ticho po 22:00", i:"ü§´"}, {k:"bez p√°rty", i:"üßä"},
    {k:"zv√≠≈ôata povolena", i:"üêæ"}, {k:"kauce", i:"üí≥"}, {k:"min. 2 noci", i:"üåô"},
  ];

  // ----- Bind inputs -----
  const bind = (id, key, opts={}) => {
    const el = $(id);
    if(!el) return;
    const isCheck = el.type === "checkbox";
    const isNumber = el.type === "number";

    const read = () => {
      let v = isCheck ? el.checked : el.value;
      if(isNumber) v = v === "" ? "" : Number(v);
      model[key] = v;
      updateAllUI();
    };

    el.addEventListener(opts.event || "input", read);
    // init
    if(isCheck) el.checked = !!model[key];
    else el.value = model[key] ?? "";
  };

  bind("name","name");
  bind("region","region");
  bind("priceFrom","priceFrom");
  bind("capacity","capacity");
  bind("type","type",{event:"change"});
  bind("vibe","vibe");
  bind("city","city");
  bind("zip","zip");
  bind("coords","coords");
  bind("privacy","privacy",{event:"change"});
  bind("ownerName","ownerName");
  bind("ownerPhone","ownerPhone");
  bind("ownerEmail","ownerEmail");
  bind("contactMode","contactMode",{event:"change"});
  bind("minNights","minNights");
  bind("checkIn","checkIn");
  bind("checkOut","checkOut");
  bind("agree","agree",{event:"change"});

  // vibe counter
  $("vibe").addEventListener("input", ()=>{
    $("vibeCount").textContent = `${String($("vibe").value||"").length}/180`;
  });

  // sliders
  const bindSlider = (id, key, outId) => {
    const el = $(id);
    el.addEventListener("input", ()=>{
      model.sliders[key] = Number(el.value);
      $(outId).textContent = String(el.value);
      updateAllUI();
    });
  };
  bindSlider("slSolitude","solitude","slSolitudeV");
  bindSlider("slDesign","design","slDesignV");
  bindSlider("slWellness","wellness","slWellnessV");

  // ----- Render tags -----
  function renderTags(){
    const wrap = $("tags");
    wrap.innerHTML = "";
    TAG_LIBRARY.forEach(t=>{
      const on = model.tags.has(t.key);
      const btn = document.createElement("button");
      btn.className = `px-4 py-2 rounded-3xl ringline transition text-sm flex items-center gap-2 ${on?"bg-ember-500/18":"bg-white/5 hover:bg-white/8"}`;
      btn.innerHTML = `<span>${t.icon}</span><span>${t.key}</span>`;
      btn.addEventListener("click", ()=>{
        if(model.tags.has(t.key)) model.tags.delete(t.key);
        else model.tags.add(t.key);
        updateAllUI();
      });
      wrap.appendChild(btn);
    });
  }

  $("btnSuggestTags").addEventListener("click", ()=>{
    const s = (model.vibe+" "+model.name+" "+model.region).toLowerCase();
    const picks = [];
    if(s.includes("saun")) picks.push("sauna");
    if(s.includes("krb")||s.includes("ohe≈à")||s.includes("ohen")) picks.push("ohe≈à");
    if(s.includes("les")||s.includes("samot")) picks.push("samota");
    if(s.includes("hory")||s.includes("krkon")||s.includes("besk")) picks.push("hory");
    if(s.includes("voda")||s.includes("jezer")||s.includes("ryb")) picks.push("voda");
    while(picks.length < 4){
      const r = TAG_LIBRARY[Math.floor(Math.random()*TAG_LIBRARY.length)].key;
      if(!picks.includes(r)) picks.push(r);
    }
    picks.slice(0,6).forEach(k=>model.tags.add(k));
    showToast("Navr≈æeno ‚úÖ");
    updateAllUI();
  });

  // ----- Amenities / rules -----
  function toggleSet(set, key){ set.has(key) ? set.delete(key) : set.add(key); }

  function renderPills(containerId, data, setRef){
    const wrap = $(containerId);
    wrap.innerHTML = "";
    data.forEach(x=>{
      const on = setRef.has(x.k);
      const b = document.createElement("button");
      b.className = `px-3 py-2 rounded-3xl ringline transition text-sm flex items-center justify-between gap-2 ${on?"bg-pine-700/26":"bg-white/5 hover:bg-white/8"}`;
      b.innerHTML = `<span class="flex items-center gap-2"><span>${x.i}</span><span>${x.k}</span></span><span class="text-xs">${on?"‚úì":"+"}</span>`;
      b.addEventListener("click", ()=>{ toggleSet(setRef,x.k); updateAllUI(); });
      wrap.appendChild(b);
    });
  }

  // ----- Photos -----
  $("photos").addEventListener("change", (e)=>{
    const files = Array.from(e.target.files || []);
    files.forEach(file=>{
      const id = crypto.randomUUID ? crypto.randomUUID() : String(Date.now())+Math.random();
      const url = URL.createObjectURL(file);
      model.photos.push({id, file, url});
    });
    if(!model.coverId && model.photos[0]) model.coverId = model.photos[0].id;
    showToast(files.length ? `P≈ôid√°no ${files.length} fotek` : "");
    updateAllUI();
    e.target.value = "";
  });

  function renderPhotos(){
    const grid = $("photoGrid");
    const coverPick = $("coverPick");
    grid.innerHTML = "";
    coverPick.innerHTML = "";

    if(!model.photos.length){
      grid.innerHTML = `<div class="rounded-4xl bg-white/4 ringline p-6 text-sm text-cream/70">≈Ω√°dn√© fotky. P≈ôidej minim√°lnƒõ 3. Doporuƒçeno 8‚Äì12.</div>`;
      return;
    }

    model.photos.forEach(p=>{
      const isCover = model.coverId === p.id;
      const card = document.createElement("div");
      card.className = "relative rounded-4xl overflow-hidden ringline bg-white/5";
      card.innerHTML = `
        <img src="${p.url}" class="h-44 w-full object-cover" alt="Foto" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
        <div class="absolute left-3 right-3 bottom-3 flex items-center justify-between">
          <button data-setcover="${p.id}" class="px-3 py-2 rounded-2xl bg-white/10 hover:bg-white/15 ringline transition text-xs">${isCover?"‚≠ê Cover":"Nastavit cover"}</button>
          <button data-del="${p.id}" class="h-9 w-9 rounded-2xl bg-white/10 hover:bg-white/15 ringline transition grid place-items-center" title="Smazat">üóëÔ∏è</button>
        </div>
      `;
      grid.appendChild(card);

      const mini = document.createElement("button");
      mini.className = `px-3 py-2 rounded-3xl ringline transition text-sm flex items-center gap-2 ${isCover?"bg-ember-500/18":"bg-white/5 hover:bg-white/8"}`;
      mini.innerHTML = `<span>üñºÔ∏è</span><span>${isCover?"Cover":"Foto"}</span>`;
      mini.addEventListener("click", ()=>{ model.coverId = p.id; updateAllUI(); });
      coverPick.appendChild(mini);
    });

    grid.querySelectorAll("button[data-setcover]").forEach(b=>b.addEventListener("click",()=>{ model.coverId=b.dataset.setcover; updateAllUI(); }));
    grid.querySelectorAll("button[data-del]").forEach(b=>b.addEventListener("click",()=>{
      const id=b.dataset.del;
      const item=model.photos.find(x=>x.id===id);
      if(item?.url) URL.revokeObjectURL(item.url);
      model.photos = model.photos.filter(x=>x.id!==id);
      if(model.coverId===id) model.coverId = model.photos[0]?.id || null;
      updateAllUI();
    }));
  }

  // ----- Quality / checklist -----
  function computeChecklist(){
    const checks = [
      {k:"N√°zev + region", ok: !!model.name.trim() && !!model.region.trim()},
      {k:"Cena + kapacita", ok: !!model.priceFrom && !!model.capacity},
      {k:"Vibe vƒõta", ok: (model.vibe||"").trim().length >= 25},
      {k:"Tagy (3+)", ok: model.tags.size >= 3},
      {k:"Fotky (3+)", ok: model.photos.length >= 3},
      {k:"Cover fotka", ok: !!model.coverId},
      {k:"V√Ωbava (4+)", ok: model.amenities.size >= 4},
      {k:"Pravidla (1+)", ok: model.rules.size >= 1},
      {k:"Lokace (mƒõsto)", ok: !!model.city.trim()},
      {k:"Kontakt (email)", ok: /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(model.ownerEmail||"")},
    ];
    const score = checks.filter(x=>x.ok).length;
    return {checks, score};
  }

  function renderChecklist(){
    const {checks, score} = computeChecklist();
    $("checkScore").textContent = `${score}/${checks.length}`;

    const wrap = $("checklist");
    wrap.innerHTML = "";
    checks.forEach(c=>{
      const row = document.createElement("div");
      row.className = `flex items-center justify-between px-4 py-3 rounded-3xl ringline ${c.ok?"bg-pine-700/18":"bg-white/5"}`;
      row.innerHTML = `<span>${c.ok?"‚úÖ":"‚¨ú"} ${c.k}</span><span class="text-xs text-cream/55">${c.ok?"OK":"chyb√≠"}</span>`;
      wrap.appendChild(row);
    });

    // quality bar
    const pct = Math.round((score/checks.length)*100);
    $("qualityPct").textContent = `${pct}%`;
    $("qualityBar").style.width = `${pct}%`;
  }

  // ----- Preview cards -----
  function getCoverUrl(){
    const p = model.photos.find(x=>x.id===model.coverId);
    return p?.url || "https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&w=1400&q=80";
  }

  function cardTemplate(size="normal"){
    const isMini = size === "mini";
    const title = model.name.trim() || "N√°zev chaty";
    const region = model.region.trim() || "Region";
    const price = model.priceFrom ? `${new Intl.NumberFormat("cs-CZ").format(model.priceFrom)} Kƒç` : "‚Äî";
    const vibe = (model.vibe||"").trim() || "Jednovƒõt√Ω vibe‚Ä¶";
    const tags = Array.from(model.tags).slice(0,4);

    return `
      <article class="group relative overflow-hidden rounded-4xl bg-white/4 ringline shadow-lift">
        <div class="absolute inset-0 grain"></div>
        <div class="relative ${isMini?"aspect-[4/3]":"aspect-[4/3]"} overflow-hidden">
          <img src="${getCoverUrl()}" class="h-full w-full object-cover" />
          <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"></div>
          <div class="absolute top-4 left-4 right-4 flex items-center justify-between">
            <div class="flex items-center gap-2">
              <span class="text-xs px-3 py-1.5 rounded-full bg-white/10 ringline">${region}</span>
              <span class="text-xs px-3 py-1.5 rounded-full bg-white/10 ringline">üë§ ${model.capacity||"‚Äî"}</span>
            </div>
            <div class="flex items-center gap-2">
              <span class="h-10 w-10 rounded-2xl bg-white/10 ringline grid place-items-center">‚ù§Ô∏è</span>
              <span class="h-10 w-10 rounded-2xl bg-white/10 ringline grid place-items-center">üîñ</span>
            </div>
          </div>
          <div class="absolute left-4 right-4 bottom-4">
            <div class="flex items-end justify-between gap-3">
              <div>
                <div class="text-lg font-semibold tracking-tight">${title}</div>
                <div class="mt-1 text-xs text-cream/75">od <span class="font-semibold text-cream">${price}</span> / noc</div>
              </div>
              <span class="px-4 py-2 rounded-3xl bg-ember-500/15 ringline shimmer text-sm">Detail ‚Üí</span>
            </div>
          </div>
        </div>
        <div class="relative p-4">
          <p class="text-sm text-cream/75 line-clamp-2">${vibe}</p>
          <div class="mt-3 flex flex-wrap gap-1.5">${tags.map(t=>`<span class="text-xs px-2.5 py-1 rounded-full bg-white/5 ringline">${t}</span>`).join("")}</div>
        </div>
      </article>
    `;
  }

  function renderMini(){
    $("miniPreview").innerHTML = cardTemplate("mini");
  }

  // ----- Summary -----
  function renderSummary(){
    const rows = [];
    const req = (label, ok, val="") => `<div class="flex items-start justify-between gap-3 px-4 py-3 rounded-3xl ringline ${ok?"bg-pine-700/18":"bg-white/5"}"><div>${ok?"‚úÖ":"‚ö†Ô∏è"} <span class="font-medium">${label}</span><div class="text-xs text-cream/55">${val}</div></div><div class="text-xs text-cream/55">${ok?"OK":"chyb√≠"}</div></div>`;

    rows.push(req("N√°zev", !!model.name.trim(), model.name||""));
    rows.push(req("Region", !!model.region.trim(), model.region||""));
    rows.push(req("Cena od", !!model.priceFrom, model.priceFrom?`${model.priceFrom} Kƒç`:""));
    rows.push(req("Kapacita", !!model.capacity, model.capacity?`${model.capacity} osob`:""));
    rows.push(req("Vibe", (model.vibe||"").trim().length>=25, (model.vibe||"").trim().slice(0,80)));
    rows.push(req("Tagy", model.tags.size>=3, Array.from(model.tags).join(", ")));
    rows.push(req("Fotky", model.photos.length>=3, `${model.photos.length} ks`));
    rows.push(req("Lokace (mƒõsto)", !!model.city.trim(), model.city||""));
    rows.push(req("Kontakt (email)", /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(model.ownerEmail||""), model.ownerEmail||""));

    $("summary").innerHTML = rows.join("");
    $("cardPreview").innerHTML = cardTemplate();
  }

  // ----- Modal preview -----
  const modal = $("modal");
  const modalPanel = $("modalPanel");
  $("modalBackdrop").addEventListener("click", ()=>{ modal.classList.add("hidden"); modalPanel.innerHTML=""; });
  window.addEventListener("keydown", (e)=>{ if(e.key==="Escape" && !modal.classList.contains("hidden")) { modal.classList.add("hidden"); modalPanel.innerHTML=""; }});

  function openPreview(){
    modalPanel.innerHTML = `
      <div class="p-6 md:p-8">
        <div class="flex items-start justify-between gap-4">
          <div>
            <div class="text-2xl font-semibold">N√°hled nab√≠dky</div>
            <div class="mt-1 text-sm text-cream/70">Jak to uvid√≠ u≈æivatel ve feedu.</div>
          </div>
          <button id="close" class="h-11 w-11 rounded-2xl bg-white/10 hover:bg-white/15 ringline grid place-items-center">‚úï</button>
        </div>
        <div class="mt-6 grid lg:grid-cols-2 gap-5">
          <div>${cardTemplate()}</div>
          <div class="rounded-4xl bg-white/4 ringline p-5">
            <div class="font-medium">Kr√°tk√° diagnostika</div>
            <div class="mt-3 text-sm text-cream/75" id="diag"></div>
          </div>
        </div>
      </div>
    `;
    $("close").addEventListener("click", ()=>{ modal.classList.add("hidden"); modalPanel.innerHTML=""; });

    const {checks, score} = computeChecklist();
    const pct = Math.round((score/checks.length)*100);
    const bad = checks.filter(x=>!x.ok).map(x=>x.k);
    $("diag").innerHTML = `
      <div class="text-xs text-cream/60">Sk√≥re kvality</div>
      <div class="mt-1 text-2xl font-semibold">${pct}%</div>
      <div class="mt-3 text-sm text-cream/75">${bad.length?`Dopl≈à: <span class="text-cream">${bad.join(", ")}</span>`:"Vypad√° to dob≈ôe. Publikuj."}</div>
    `;

    modal.classList.remove("hidden");
  }

  // ----- Save / publish (demo) -----
  function normalize(){
    // vygeneruj ID pokud nen√≠
    if(!model.id){
      model.id = (model.name||"chata").toLowerCase().replace(/[^a-z0-9]+/gi,"-").replace(/(^-|-$)/g,"") + "-" + Math.floor(1000+Math.random()*9000);
    }
  }

  function validateRequired(){
    const errs = [];
    if(!model.name.trim()) errs.push("N√°zev");
    if(!model.region.trim()) errs.push("Region");
    if(!model.priceFrom) errs.push("Cena od");
    if(!model.capacity) errs.push("Kapacita");
    if((model.vibe||"").trim().length < 25) errs.push("Vibe (min 25 znak≈Ø)");
    if(model.tags.size < 3) errs.push("Tagy (min 3)");
    if(model.photos.length < 3) errs.push("Fotky (min 3)");
    if(!model.city.trim()) errs.push("Mƒõsto/obec");
    if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(model.ownerEmail||"")) errs.push("E-mail");
    if(step === 5 && !model.agree) errs.push("Souhlas (checkbox)");
    return errs;
  }

  function saveDraft(){
    normalize();
    const payload = serialize();
    const drafts = JSON.parse(localStorage.getItem("chatao_drafts")||"{}");
    drafts[payload.id] = payload;
    localStorage.setItem("chatao_drafts", JSON.stringify(drafts));
    showToast("Koncept ulo≈æen ‚úÖ");
  }

  function publish(){
    const errs = validateRequired();
    if(errs.length){
      showToast("Dopl≈à: " + errs.slice(0,3).join(", ") + (errs.length>3?"‚Ä¶":""));
      return;
    }
    normalize();
    const payload = serialize();

    // 1) ulo≈æit jako "publikovanou nab√≠dku" (admin data)
    const pub = JSON.parse(localStorage.getItem("chatao_listings")||"{}");
    pub[payload.id] = payload;
    localStorage.setItem("chatao_listings", JSON.stringify(pub));

    // 2) ulo≈æit do FEED form√°tu (kompatibiln√≠ s CABINS)
    const feed = JSON.parse(localStorage.getItem("chatao_feed")||"[]");
    const feedItem = toFeedItem(payload);
    const idx = feed.findIndex(x=>x.id===feedItem.id);
    if(idx>=0) feed[idx] = feedItem; else feed.unshift(feedItem);
    localStorage.setItem("chatao_feed", JSON.stringify(feed));

    showToast("Publikov√°no ‚úÖ");

    // 3) voliteln√Ω n√°vrat na feed (kdy≈æ p≈ôid√°≈° ?return=...)
    const ret = new URLSearchParams(location.search).get("return");
    if(ret){
      setTimeout(()=>{ location.href = ret + (ret.includes("?")?"&":"?") + "newListing=" + encodeURIComponent(payload.id); }, 650);
    }
  }

  function serialize(){
    return {
      id: model.id,
      name: model.name.trim(),
      region: model.region.trim(),
      priceFrom: Number(model.priceFrom||0),
      capacity: Number(model.capacity||0),
      type: model.type,
      vibe: (model.vibe||"").trim(),
      tags: Array.from(model.tags),
      coverUrl: getCoverUrl(),
      photosCount: model.photos.length,
      amenities: Array.from(model.amenities),
      rules: Array.from(model.rules),
      sliders: model.sliders,
      city: model.city.trim(),
      zip: model.zip.trim(),
      coords: model.coords.trim(),
      privacy: !!model.privacy,
      ownerName: model.ownerName.trim(),
      ownerPhone: model.ownerPhone.trim(),
      ownerEmail: model.ownerEmail.trim(),
      contactMode: model.contactMode,
      minNights: Number(model.minNights||1),
      checkIn: model.checkIn,
      checkOut: model.checkOut,
      createdAt: new Date().toISOString(),
    };
  }

  // ===== FEED kompatibilita =====
  // C√≠l: aby se nov√° chata dala nacpat do stejn√©ho tvaru jako CABINS
  function toFeedItem(p){
    // vyrob bezpeƒçn√© demo hodnocen√≠ (pozdƒõji skuteƒçn√©)
    const base = 4.6;
    const bump = Math.min(0.35, (p.photosCount||0) * 0.02 + (p.tags?.length||0) * 0.01);
    const rating = Math.round((base + bump) * 10) / 10;

    // features = mix v√Ωbavy + p√°r pravidel
    const features = [...(p.amenities||[]).slice(0,7)];
    const rules = (p.rules||[]).slice(0,3).map(r=>`Pravidlo: ${r}`);

    return {
      id: p.id,
      name: p.name,
      region: p.region,
      priceFrom: Number(p.priceFrom||0),
      capacity: Number(p.capacity||0),
      type: p.type,
      vibe: p.vibe,
      cover: p.coverUrl,
      rating,
      tags: p.tags || [],
      features: [...features, ...rules].slice(0,10),
      // extra metainfo (nezavad√≠ ani kdy≈æ to feed ignoruje)
      meta: {
        city: p.city,
        privacy: !!p.privacy,
        sliders: p.sliders,
        minNights: p.minNights,
        checkIn: p.checkIn,
        checkOut: p.checkOut,
        createdAt: p.createdAt,
      }
    };
  }

  // ve≈ôejn√© API pro feed str√°nku (kdy≈æ chce≈° import bez duplikac√≠)
  window.CHATAO = window.CHATAO || {};
  window.CHATAO.getFeedItems = function(){
    try{ return JSON.parse(localStorage.getItem("chatao_feed")||"[]") || []; }
    catch{ return []; }
  };

  // ----- Buttons -----
  $("btnBack").addEventListener("click", ()=>setStep(step-1));
  $("btnNext").addEventListener("click", ()=>{
    // soft validation: pokud chyb√≠ z√°sadn√≠ vƒõci, brzd√≠ na kl√≠ƒçov√Ωch p≈ôechodech
    if(step === 0){
      const errs = validateRequired().filter(e=>["N√°zev","Region","Cena od","Kapacita","Vibe (min 25 znak≈Ø)","Tagy (min 3)"].includes(e));
      if(errs.length){ showToast("Dopl≈à: " + errs.slice(0,3).join(", ") + (errs.length>3?"‚Ä¶":"")); return; }
    }
    if(step === 1 && model.photos.length < 3){ showToast("P≈ôidej aspo≈à 3 fotky"); return; }
    if(step === 3 && !model.city.trim()){ showToast("Dopl≈à mƒõsto/obec"); return; }

    if(step === steps.length-1){
      publish();
      return;
    }
    setStep(step+1);
  });

  $("btnSaveDraft").addEventListener("click", saveDraft);
  $("btnPreview").addEventListener("click", openPreview);
  $("btnPublish").addEventListener("click", ()=>{ setStep(5); openPreview(); });

  // ----- Update UI -----
  function updateAllUI(){
    renderTags();
    renderPills("amenities", AMENITIES, model.amenities);
    renderPills("rules", RULES, model.rules);
    renderPhotos();
    renderChecklist();
    renderMini();
    if(step === 5) renderSummary();

    // vibe count
    $("vibeCount").textContent = `${String(model.vibe||"").length}/180`;

    // progress color logic
    const {checks, score} = computeChecklist();
    const pct = Math.round((score/checks.length)*100);
    $("qualityBar").className = "h-full " + (pct>=80?"bg-pine-500/55":pct>=50?"bg-ember-500/35":"bg-fog-500/35");

    // update preview card on step changes
    if(step === 5) renderSummary();
  }

  // init
  setStep(0);
  updateAllUI();
</script>

<!-- Google Analytics (placeholder - nahraƒète sv√Ωm GA4 Measurement ID) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXXX');
</script>

<!-- JSON-LD Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "P≈ôidat chatu ‚Äì CHATAO.cz",
  "description": "P≈ôidejte svoji chatu, chalupu nebo jinou slu≈æbu do CHATAO.cz a zaƒçnƒõte p≈ôij√≠mat rezervace p≈ô√≠mo p≈ôes Instagram chat",
  "url": "https://chatao.cz/pridat-chatu.html",
  "isPartOf": {
    "@type": "WebSite",
    "name": "CHATAO.cz",
    "url": "https://chatao.cz/"
  },
  "potentialAction": {
    "@type": "RegisterAction",
    "target": "https://chatao.cz/pridat-chatu.html"
  }
}
</script>

</body>
</html>
